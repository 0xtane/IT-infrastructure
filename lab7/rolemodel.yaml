---
- name: node_exporter
  hosts: servers
  become: yes
  vars:
    node_exporter_user: node_exporter
    bind_exporter_user: bind_exporter
    node_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256   
          35343933636663383838393130646666383335316536303734393361653734376362636565653633
          3633386162363733633861303963306264386533336235320a633464666466616165383833613830
          30373634636465643738626661646534616436323165633839313966326239646438313130373538
          3262616336663563640a663861653733613036613731666436356261306431633239383864643231
          3139
    exporter_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          36623533386236326139343137373264393261656439316333356630623733373736366433356265
          3866613633343437343634646635373662383630366539310a643137303935623663653961333035
          63303339303262396530393236363335636339383262313239646164663061393865326565363564
          6366316165636634390a323537323865333234323838306339323230616639653566386132376661
          3430
  roles: 
    - node_exporter
    - bind_exporter
  tags: exporters

- name: prometheus
  hosts: server2
  become: yes
  vars:
     version: 2.14.0
     prometheus_user: root
     mysql_exporter_user: mysql_exporter
     mycnf_dest: /home/mysql_exporter/
     apache_exporter_user: apache_exporter
     apache_exporter_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          36663961343136353931646230353532393135313139323732656265343262323036646436666334
          3831636135356131633036653463376334393038343138640a626131366564333261663834343435
          37356665323231376336643733626130636634386238356462653230373735626638356462633336
          3933386630393062340a313138376464343031376561373634393334613335303862633562323432
          6536
     exporter_pass: exporter
     mysql_exporter_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          63623963313137363336323530653761316233623761626364373364623530393766656231343131
          3437666134613534616231653762613439303936663337650a313731376638656464376165383338
          32396265643730666537383831643261393266653262376564396234393962343039656133376638
          6234636635313734330a316634306663376561333837306333386234656635383961663561376631
          3964
  roles:
    - prometheus
    - grafana importer
    - mysql_exporter
    - apache_exporter
  tags: 
    - prometheus
    - createuser
